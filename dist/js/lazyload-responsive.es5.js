(function(){if("undefined"!=typeof window)try{var a=new window.CustomEvent("test",{cancelable:!0});if(a.preventDefault(),!0!==a.defaultPrevented)throw new Error("Could not prevent default")}catch(a){var b=function(a,b){var c,d;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),d=c.preventDefault,c.preventDefault=function(){d.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(a){this.defaultPrevented=!0}},c};b.prototype=window.Event.prototype,window.CustomEvent=b}})(),String.prototype.includes||(String.prototype.includes=function(a,b){'use strict';return"number"!=typeof b&&(b=0),!(b+a.length>this.length)&&-1!==this.indexOf(a,b)}),Array.prototype.filter||(Array.prototype.filter=function(a,b){'use strict';if(!(("Function"==typeof a||"function"==typeof a)&&this))throw new TypeError;var d,e=this.length>>>0,f=Array(e),g=this,h=0,j=-1;if(void 0===b)for(;++j!==e;)j in this&&(d=g[j],a(g[j],j,g)&&(f[h++]=d));else for(;++j!==e;)j in this&&(d=g[j],a.call(b,g[j],j,g)&&(f[h++]=d));return f.length=h,f}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(a){if(null==this)throw TypeError("\"this\" is null or not defined");var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError("predicate must be a function");for(var d=arguments[1],e=0;e<c;){var f=b[e];if(a.call(d,f,e,b))return f;e++}},configurable:!0,writable:!0}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(1<arguments.length&&(c=b),d=Array(g),e=0;e<g;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d});function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.lazyload=a()})(function(){var a,b={},c=0,d=function(){function d(c,e){for(var f in _classCallCheck(this,d),a=this,a.defaults={mode:"observe",selector:".lazy",srcAttr:"data-src",mediaAttr:"data-media"},c&&("string"==typeof c?(b=a.options=e,b.selector=c):b=a.options=c),a.defaults)void 0===b[f]&&(b[f]=a.defaults[f]);a.init()}return _createClass(d,[{key:"init",value:function(){var c=function(){for(var a=[],c=document.querySelectorAll(b.selector),d=0;d<c.length;d++)a.push(c[d]);return a}();a.elements=c.map(function(c,d){return{id:d,tag:c,dataSrc:c.getAttribute(b.srcAttr)||c.getAttribute("data-poster"),media:c.hasAttribute(b.mediaAttr)&&c.getAttribute(b.mediaAttr).replace(/\n*\t*/g,""),load:function(){var c=this.checkMedia(this.firstMedia,this.otherMedia),d=this.media&&c?this.mediaQuiries[c]:this.dataSrc,f=this.tag;if(a.arrayEquality(d,this.currentUrl)||f.innerHTML===this.dataSrc+"")return void a.loadNextElem();if(this.currentUrl=[],this.content)f.innerHTML+=this.dataSrc,a.loadNextElem();else if("IMG"===f.tagName||"IFRAME"===f.tagName)f.src=d,this.currentUrl.push(d[g]),"progressive"===b.mode?f.addEventListener("load",function(){a.loadNextElem()},{once:!0}):"embed"===b.mode&&(console.log("msg"),a.loadNextElem());else if("VIDEO"===f.tagName){f.setAttribute("poster",this.dataSrc);for(var g=0;g<f.children.length;g++)("SOURCE"===f.children[g].tagName||"TRACK"===f.children[g].tagName)&&f.children[g].setAttribute("src",f.children[g].getAttribute("data-src"));f.load()}else if("observe"!==b.mode&&f.addEventListener("loaded",function(){a.loadNextElem()},{once:!0}),f.style.backgroundImage="","progressive"===b.mode)this.progressiveLoadBackgrounds(d);else{for(var g=0;g<d.length;g++)-1===d[g].search(/gradient\(.*?\)|url\(.*?\)/)&&(d[g]=d[g].replace(/.*/,"url($&)")),this.currentUrl.push(d[g]);f.style.backgroundImage=d+"";var h=new CustomEvent("loaded");f.dispatchEvent(h)}},progressiveLoadBackgrounds:function(a,b){var c=this,d=++b||0;if(a[d]){var e,f=document.createElement("img");this.currentUrl.push(a[d]),e=-1===a[d].search(/gradient\(.*?\)|url\(.*?\)/)?a[d].replace(/.*/,"url($&)"):a[d],this.tag.style.backgroundImage+=0===d?e:",".concat(e),-1===a[d].search(/gradient\(.*?\)/)?(f.setAttribute("src",a[d].replace(/url\((.*)\)/,"$1")),f.addEventListener("load",function(){return c.progressiveLoadBackgrounds(a,d)},{once:!0})):this.progressiveLoadBackgrounds(a,d)}else this.tag.dispatchEvent(new Event("loaded"))},checkMedia:function(a,b){if(this.media)return new Function("firstMedia","otherMedia","\n\t\t\t\t\t\t\tif (window.matchMedia('".concat(a,"').matches) {\n\t\t\t\t\t\t\t\treturn '").concat(a,"';\n\t\t\t\t\t\t\t} ").concat(function(){if(0===b.length)return"";for(var a="",c=0;c<b.length;c++)a+="else if (window.matchMedia('".concat(b[c],"').matches) {return '").concat(b[c],"'}");return a+="else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}",a}(),"\n\t\t\t\t\t "))()}}}),a.prepareElements()}},{key:"prepareElements",value:function(){window.addEventListener("load",function(){var d=/(?:\,\s?)(?=url|linear|radial|conic|repeating|(?:\.(?!\d))|\/)/;a.elements.forEach(function(b){if(b.content=-1!==b.dataSrc.search(/<.*?>/),b.dataSrc=b.dataSrc.replace(/\n*\t*/g,"").split(d),b.media){b.mediaQuiries={},b.mediaArray=[];for(var c,e,f,g=b.media.split(";"),h=0;h<g.length;h++)g[h]=g[h].replace(/(.*?){/,function(a,b){return c=b,""}).replace(/}$/,"").split(d),b.mediaQuiries[c]=g[h],b.mediaArray.push(c);a.minmax(b,e,"min"),a.minmax(b,f,"max"),b.mediaArray.every(function(a){return a.includes("max-width")})?(b.mediaArray.reverse(),b.firstMedia=b.minMedia):b.mediaArray.every(function(a){return a.includes("min-width")})?(b.firstMedia=b.maxMedia,b.mediaArray.reverse()):b.firstMedia=b.mediaArray[0],b.otherMedia=b.mediaArray.filter(function(a){return b.firstMedia!==a})}}),"observe"===b.mode?a.observer():a.loadNext(),setTimeout(function(){window.addEventListener("resize",function(){c=0,a.loadNext()})},10)},{once:!0})}},{key:"observer",value:function(){function b(){c.top=pageYOffset,c.bottom=pageYOffset+window.screen.height;for(var b=0;b<a.elements.length;b++)a.elements[b].observed&&a.elements[b].posBottom>c.top&&a.elements[b].posTop<c.bottom&&(a.elements[b].load(!0),a.elements[b].observed=!1)}for(var c={top:pageYOffset,bottom:pageYOffset+window.screen.height},d=0;d<a.elements.length;d++)a.elements[d].posTop=a.elements[d].tag.getBoundingClientRect().top+pageYOffset,a.elements[d].posBottom=a.elements[d].tag.getBoundingClientRect().bottom+pageYOffset,a.elements[d].observed=!0;b(),window.addEventListener("scroll",b)}},{key:"arrayEquality",value:function(a,b){if(!b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}},{key:"minmax",value:function(b,c,d){c=Math[d].apply(Math,b.mediaArray.map(function(b){return a.getMediaNumber(b)})),b["".concat(d,"Media")]=b.mediaArray.find(function(a){return-1!==a.search(c)})}},{key:"getMediaNumber",value:function(a){return+a.replace(/[^0-9|\.]/g,"")}},{key:"loadNextElem",value:function(){c++,a.loadNext()}},{key:"loadNext",value:function(){a.elements[c]&&a.elements[c].load()}}]),d}();return d});
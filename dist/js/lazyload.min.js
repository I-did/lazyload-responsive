(function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.lazyload=a()})(function(){return lazyload=function(){return function(a){var b=this;for(var c in b.options=a||{},b.defaults={elements:".lazy",srcAttr:"data-src",mediaAttr:"data-media"},b.elements=[],b.defaults)void 0===b.options[c]&&(b.options[c]=b.defaults[c]);b.init()}}(),lazyload.prototype.init=function(){for(var a=this,b=a.options,c=document.querySelectorAll(b.elements),d=/\n|\t|\s{2,}/gm,e=/\(max\-width.*?\)|\(min\-width.*?\)/g,f=/\{.*?\}/g,g=0;g<c.length;g++){var h=c[g].getAttribute(b.mediaAttr),k=void 0,l=void 0;if(c[g].lazyObject={src:c[g].getAttribute(b.srcAttr),media:{}},h){h=h.replace(d,""),k=h.match(e),l=h.match(f);var m=c[g].lazyObject.media;m.length=k.length;for(var n=0;n<m.length;n++)m[k[n]]=l[n].slice(1,-1)}a.elements.push(c[g]);var j=new CustomEvent("lazyinit");c[g].dispatchEvent(j)}a.startObserve()},lazyload.prototype.startObserve=function(){for(var a=this,b=a.elements,c=new IntersectionObserver(function(a){a.forEach(function(a){if(a.isIntersecting){var b,d=a.target,e=d.lazyObject;for(var f in e.media)"length"!=f&&matchMedia(f).matches&&(b=e.media[f]);switch(b||(b=e.src),d.tagName.toLowerCase()){case"img":case"iframe":case"video":d.src=b;break;case"header":case"section":case"footer":case"main":case"div":case"span":case"button":case"form":case"article":d.style.backgroundImage=b;}var g=new CustomEvent("lazyloaded");d.dispatchEvent(g),c.unobserve(d)}})}),d=0;d<b.length;d++)c.observe(b[d]);window.addEventListener("resize",function(){for(var a=0;a<b.length;a++)c.unobserve(b[a]),c.observe(b[a])})},lazyload});